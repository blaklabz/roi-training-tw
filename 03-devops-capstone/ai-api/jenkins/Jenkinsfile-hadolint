pipeline {
  agent any

  parameters {
    string(name: 'DOCKERFILE_PATH', defaultValue: '03-devops-capstone/ai-api/Dockerfile', description: 'Path to Dockerfile')
  }

  stages {
    stage('Lint Dockerfile') {
      steps {
        sh """
          curl -sSL https://github.com/hadolint/hadolint/releases/latest/download/hadolint-$(uname -s)-$(uname -m) -o hadolint
          chmod +x hadolint
          ./hadolint ${params.DOCKERFILE_PATH}
        """
      }
    }
  }
}
